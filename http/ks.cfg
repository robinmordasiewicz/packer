install
cdrom
lang en_US.UTF-8
keyboard us
unsupported_hardware
network --bootproto=dhcp
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --permissive
timezone UTC
bootloader --location=mbr
text
skipx
zerombr
clearpart --all --initlabel
autopart
auth  --useshadow  --enablemd5
firstboot --disabled
reboot
rootpw ubuntu
user --name=centos --groups=centos --password=centos

%packages --ignoremissing --excludedocs
%@Base
%@Core
%@Development Tools
%-@Graphical Internet
%openssl-devel
%readline-devel
%zlib-devel
%kernel-devel
%wget
%curl
%%end
%
%%post
%yum install -y epel-release
%yum update -y
%yum install -y httping iftop iperf3 ivpsadm net-tools nmap-ncat ntp sysstat tcpdump telnet tmux tree vim wireshark yum-plugin-fastestmirror yum-utils zsh
%
%sudo systemctl enable ntpd
%
%# sudo
%echo "centos ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
%
%# ssh key
%mkdir /home/centos/.ssh
%cat <<EOF >> /home/centos/.ssh/authorized_keys
%ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCkEMC33A1C22buAJWmGzYONyieAXML5IDqzGh2ThWMimybpmDwNehlQvSOs1irIidWVdNjOzbNtXcaGtdph6B7rEb2zRlmBcDJfyU9cbn1neiVQTJBKjE3PatUfB5vpbr4f4bkmaqQMlU+f9xuGOlp9JyxWzSYpqZOkDVpJ9CJ1q4I65DrI+ZA3MHlK67hJDUH+kt0EZAyXzLhl0mvsifXv48cbLNkZ9zqsT/jMXY0K1DMz4xodTHineMxH7hLOmQnrCtrwhS09nBUzaGh8fRZpFf9kYoDXnQ83XCZw7mH5mN5d8Vp89dZS2ieBZZBZsbvRtvsPgHEEF4IZ75YkxVndmbtZ9/q73ScXCfZX94ujvOKl85meX259D5b5j1bT6f233IoVrslLVhvKVu2dgp7YCjQc8GiMkAFMqJ7+um+O/krqUkpT46IA9fsg+Ttu5HJ8LHQfWNSDiD7YE1wDKCP7KQpS/IZ7ejakGhLgYOAsKyA5igYvI4JY2rWze4wK5E= r.mordasiewicz@FP4MC6YJ4X
%EOF
%
%chmod 0700 -R /home/centos/.ssh
%chown centos:centos -R /home/centos/.ssh
%sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers
%%end
